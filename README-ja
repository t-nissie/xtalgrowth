=begin
= xtalgrowth
xtalgrowthは２次元結晶成長をシミュレートするＸアプリケーションです。xtalgrowthを
起動すると、画面の上から剛体球が落ちてきて画面の底に降り積もり、２次元の結晶が成長します。
コマンドラインオプションで計算条件を変更することができます。賞状の形をした計算結果が
PostScriptファイルとして標準出力 (STDOUT) から出力されます。オープンキャンパスや研究所の
一般公開の来場者参加型の展示物に適しています。Linux や Mac OS X などのUNIX系の
コンピュータで動きます。

使用方法:
 $ xtalgrowth --help
 $ xtalgrowth -d 0.033 -c 3
 $ xtalgrowth -d 0.033 -c 2
 $ xtalgrowth -d 0.015 -c 1 -n 2000
 $ xtalgrowth -g 'Mr. Takeshi Nishimatsu' | lpr
賞状が必要な場合はカレントディレクトリにパッケージに同梱されているような
certification.eps を置いてください。賞状のタイトルとして使われ、-g
オプションで指定した名前と今日の日付が賞状に入ります。

印刷がうまくいかないときは次のようにgsを間に入れて下さい：
 $ xtalgrowth [オプション...] | gs -q -sDEVICE=pswrite -sOutputFile=- -dNOPAUSE -dBATCH - | lpr

== ホームページとダウンロード
xtalgrowthのホームページは http://loto.sourceforge.net/xtalgrowth/ です。
最新のtar.gzパッケージ (xtalgrowth-X.Y.Z.tar.gz) を
http://sourceforge.net/projects/loto/files/
からダウンロードすることができます。

== コンパイルおよびインストールの方法
コンパイルには
 * gccなどのＣコンパイラ
 * X11ライブラリとそのインクルード・ファイル
 * poptライブラリとそのインクルード・ファイル
が必要です。必要なものがそろっていれば
 $ tar zxf xtalgrowth-X.Y.Z.tar.gz
 $ cd xtalgrowth-X.Y.Z
 $ ./configure
 $ make
とすることで src/xtalgrowth ができるはずです。
 $ cd src
 $ ./xtalgrowth --help
 $ ./xtalgrowth
と試しに実行してみましょう。
さらに /usr/local/bin/xtalgrowth をインストールしたい場合は
 $ sudo make install
としてください。

一部の64ビットのシステムでは、
 /usr/bin/ld: skipping incompatible /usr/X11R6/lib/libX11.so when searching for -lX11
というようなメッセージが出てリンクに失敗することがあります。その場合はconfigureのときに
 $ LDFLAGS="-L/usr/local/lib -L/usr/X11R6/lib64" ./configure
などとLDFLAGSを調節してください。csh系をお使いの場合には
 % env LDFLAGS="-L/usr/local/lib -L/usr/X11R6/lib64" ./configure
とenvコマンドを使ってください。

== 計算条件
x方向は周期的境界条件

球と球とが接したかどうかの計算とそのあとの軌道計算が大雑把。
この大雑把な計算精度が「乱雑さ」として表れる。

== 結果の解釈
=== 基板は球を等間隔に並べており、また、計算が大雑把なので
==== 球の大きさがキツキツだと綺麗に並ばない
 ./xtalgrowth -d 0.033333

==== 球の大きさにゆとりがあると綺麗に並ぶ
 ./xtalgrowth -d 0.033

=== 球が動かなくなる条件を変えると…
==== ３つ以上の球と接したら動かなくなる→綺麗に並ぶ
./xtalgrowth -d 0.033 -c 3

==== ２つ以上の球と接したら動かなくなる→空孔ができる
./xtalgrowth -d 0.033 -c 2

==== １つ以上の球と接したら動かなくなる→フラクタル的になる
./xtalgrowth -d 0.033 -c 1 -n 100

==== もう少し細かくて美しいもの
./xtalgrowth -d 0.015 -c 1 -n 520

== 参考文献
[1] Jean-Francois Gouyet, Michel Rosso and Bernard Sapoval: "Fractal surfaces and interfaces"
in the book of "Fractals and disordered systems" edited by Armin Bunde and Shlomo Havlin,
pp. 229-261 (1991), ISBN:0-387-54070-9, Springer-Verlag New York.

[2] Lawrence Bragg and J. F. Nye: "A Dynamical Model of a Crystal Structure",
Proceedings of the Royal Society of London. Series A, Mathematical and Physical Sciences,
Vol. 190, No. 1023, pp. 474-481 (Sep. 9, 1947).

[3] Lawrence Bragg and W. M. Lomer: "A Dynamical Model of a Crystal Structure. II", 
Proceedings of the Royal Society of London. Series A, Mathematical and Physical Sciences,
Vol. 196, No. 1045, pp. 171-181 (Mar. 22, 1949).

== Acknowledgements
http://loto.sourceforge.net/xtalgrowth/ is hosted by SourceForge.net .
=end

# お客さんがいないときは ./againagain.sh を実行しておくこと。

# 印刷方法
# a2ps -Pkawaqms4 --portrait --pretty-print=c --columns=1 --margin=30 --borders=off Xsim.c

#
# for ulmul.rb
#
require 'rubygems'
require 'ulmul'
u=Ulmul.new()
u.subs_rules << [/(README-ja\S*)(\s|$)/,     '<a href="\1">\1</a>\2']
u.subs_rules << [/&package_id/,              '&amp;package_id']
u.subs_rules << [/SourceForge.net/,          '<a href="http://sourceforge.net"><img src="http://sflogo.sourceforge.net/sflogo.php?group_id=204591&amp;type=4" width="125" height="37" border="0" alt="SourceForge.net Logo" /></a>']

u.parse(ARGF)
puts u.html(["style.css"],[],"Takeshi Nishimatsu","ja")

# Local variables:
#   mode: RD
#   compile-command: "ruby README-ja README-ja > README-ja.html"
# End:
